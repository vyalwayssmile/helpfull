(()=>{"use strict";var t={235:t=>{var e="%[a-f0-9]{2}",i=new RegExp("("+e+")|([^%]+?)","gi"),n=new RegExp("("+e+")+","gi");function a(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],a(i),a(n))}function s(t){try{return decodeURIComponent(t)}catch(s){for(var e=t.match(i)||[],n=1;n<e.length;n++)e=(t=a(e,n).join("")).match(i)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=n.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var a=s(i[0]);a!==i[0]&&(e[i[0]]=a)}i=n.exec(t)}e["%C2"]="�";for(var r=Object.keys(e),o=0;o<r.length;o++){var d=r[o];t=t.replace(new RegExp(d,"g"),e[d])}return t}(t)}}},802:t=>{t.exports=function(t,e){for(var i={},n=Object.keys(t),a=Array.isArray(e),s=0;s<n.length;s++){var r=n[s],o=t[r];(a?-1!==e.indexOf(r):e(r,o,t))&&(i[r]=o)}return i}},713:(t,e,i)=>{const n=i(218),a=i(235),s=i(529),r=i(802),o=Symbol("encodeFragmentIdentifier");function d(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function h(t,e){return e.decode?a(t):t}function c(t){return Array.isArray(t)?t.sort():"object"==typeof t?c(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function g(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function p(t){const e=(t=g(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function u(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function v(t,e){d((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const i=function(t){let e;switch(t.arrayFormat){case"index":return(t,i,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=i):n[t]=i};case"bracket":return(t,i,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=[i]:n[t]=i};case"colon-list-separator":return(t,i,n)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=[i]:n[t]=i};case"comma":case"separator":return(e,i,n)=>{const a="string"==typeof i&&i.includes(t.arrayFormatSeparator),s="string"==typeof i&&!a&&h(i,t).includes(t.arrayFormatSeparator);i=s?h(i,t):i;const r=a||s?i.split(t.arrayFormatSeparator).map((e=>h(e,t))):null===i?i:h(i,t);n[e]=r};case"bracket-separator":return(e,i,n)=>{const a=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!a)return void(n[e]=i?h(i,t):i);const s=null===i?[]:i.split(t.arrayFormatSeparator).map((e=>h(e,t)));void 0!==n[e]?n[e]=[].concat(n[e],s):n[e]=s};default:return(t,e,i)=>{void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}(e),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const a of t.split("&")){if(""===a)continue;let[t,r]=s(e.decode?a.replace(/\+/g," "):a,"=");r=void 0===r?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?r:h(r,e),i(h(t,e),r,n)}for(const t of Object.keys(n)){const i=n[t];if("object"==typeof i&&null!==i)for(const t of Object.keys(i))i[t]=u(i[t],e);else n[t]=u(i,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(((t,e)=>{const i=n[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=c(i):t[e]=i,t}),Object.create(null))}e.extract=p,e.parse=v,e.stringify=(t,e)=>{if(!t)return"";d((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const i=i=>e.skipNull&&null==t[i]||e.skipEmptyString&&""===t[i],n=function(t){switch(t.arrayFormat){case"index":return e=>(i,n)=>{const a=i.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[l(e,t),"[",a,"]"].join("")]:[...i,[l(e,t),"[",l(a,t),"]=",l(n,t)].join("")]};case"bracket":return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[l(e,t),"[]"].join("")]:[...i,[l(e,t),"[]=",l(n,t)].join("")];case"colon-list-separator":return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[l(e,t),":list="].join("")]:[...i,[l(e,t),":list=",l(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return i=>(n,a)=>void 0===a||t.skipNull&&null===a||t.skipEmptyString&&""===a?n:(a=null===a?"":a,0===n.length?[[l(i,t),e,l(a,t)].join("")]:[[n,l(a,t)].join(t.arrayFormatSeparator)])}default:return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,l(e,t)]:[...i,[l(e,t),"=",l(n,t)].join("")]}}(e),a={};for(const e of Object.keys(t))i(e)||(a[e]=t[e]);const s=Object.keys(a);return!1!==e.sort&&s.sort(e.sort),s.map((i=>{const a=t[i];return void 0===a?"":null===a?l(i,e):Array.isArray(a)?0===a.length&&"bracket-separator"===e.arrayFormat?l(i,e)+"[]":a.reduce(n(i),[]).join("&"):l(i,e)+"="+l(a,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[i,n]=s(t,"#");return Object.assign({url:i.split("?")[0]||"",query:v(p(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:h(n,e)}:{})},e.stringifyUrl=(t,i)=>{i=Object.assign({encode:!0,strict:!0,[o]:!0},i);const n=g(t.url).split("?")[0]||"",a=e.extract(t.url),s=e.parse(a,{sort:!1}),r=Object.assign(s,t.query);let d=e.stringify(r,i);d&&(d=`?${d}`);let h=function(t){let e="";const i=t.indexOf("#");return-1!==i&&(e=t.slice(i)),e}(t.url);return t.fragmentIdentifier&&(h=`#${i[o]?l(t.fragmentIdentifier,i):t.fragmentIdentifier}`),`${n}${d}${h}`},e.pick=(t,i,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[o]:!1},n);const{url:a,query:s,fragmentIdentifier:d}=e.parseUrl(t,n);return e.stringifyUrl({url:a,query:r(s,i),fragmentIdentifier:d},n)},e.exclude=(t,i,n)=>{const a=Array.isArray(i)?t=>!i.includes(t):(t,e)=>!i(t,e);return e.pick(t,a,n)}},529:t=>{t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]}},218:t=>{t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};(()=>{i.d(n,{default:()=>h});var t=i(713);try{var e=window.top,s=window.top.document}catch(t){e=window,s=window.document}var r=(new Date).getTime();try{var o=window.top;window.top.document}catch(t){o=window,window.document}var d=!1;class l{constructor(){const e=t.parse(o.location.search),{log:i}=e;i&&(console.log("VPAID Log!"),d=!0),this.slot_=null,this.videoSlot_=null,this.eventCallbacks_={},this.attributes_={companions:"",desiredBitrate:256,duration:30,expanded:!1,height:0,icons:"",linear:!0,remainingTime:10,skippableState:!1,viewMode:"normal",width:0,volume:0,videosrc:"",skipoffset:5,type:"",bitrate:""},this.index_=0,this.Interval=null,this.IntervalSkip=null,this._vidContent=null,this._adContainer=null,this._videoPlayer=null,this.Tracking={},this.HTML_TEMPLATE="",this.ini_AdEvent=this.ini_AdEvent.bind(this),this.timeShowSkipAd=null}log(t){d&&console.log("Vpaid Log V3:"+t)}collapseAd(){this.log("collapseAd"),this.attributes_.expanded=!1}expandAd(){this.log("expandAd"),this.attributes_.expanded=!0,"AdExpanded"in this.eventCallbacks_&&this.eventCallbacks_.AdExpanded()}getAdIcons(){return this.log("getAdIcons"),this.attributes_.icons}getAdDuration(){return this.log("getAdDuration"),this.attributes_.duration}getAdExpanded(){return this.log("getAdExpanded"),this.log("getAdExpanded"),this.attributes_.expanded}getAdHeight(){return this.log("getAdHeight"),this.attributes_.height}getAdLinear(){return this.log("getAdLinear"),this.attributes_.linear}getAdRemainingTime(){return this.log("getAdRemainingTime"),this.attributes_.remainingTime}getAdSkippableState(){return this.log("getAdSkippableState"),this.log("getAdSkippableState"),this.attributes_.skippableState}getAdVolume(){return this.log("getAdVolume"),this.log("getAdVolume"),this.attributes_.volume}getAdWidth(){return this.log("getAdWidth"),this.attributes_.width}handshakeVersion(){return this.log("handshakeVersion"),"2.0"}initAd(t,e,i,n,a,s){this.log("initAd"),this.slot_=s.slot,this.videoSlot_=s.videoSlot,this.attributes_.width=t,this.attributes_.height=e,this.attributes_.viewMode=i,this.attributes_.desiredBitrate=n;var r=JSON.parse(a.AdParameters);for(var o in r)r.hasOwnProperty(o)&&(this.attributes_[o]=r[o]||null);this.timeShowSkipAd=this.attributes_.timeShowSkipAd,this.attributes_.vastURL=this.attributes_.vast_list;var d=document.createElement("script");d.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",d.type="text/javascript",d.async="async",document.getElementsByTagName("head")[0].appendChild(d),d.addEventListener("load",(()=>{this.renderSlot_((()=>{this.addButtonListeners_(),this.fillProperties_(),this.renderVideo(),this.eventCallbacks_.AdLoaded()}))}))}pauseAd(){this.log("pauseAd"),"AdPaused"in this.eventCallbacks_&&this.eventCallbacks_.AdPaused(),this.iniPlayer.pause()}stopAd(){this.log("Stopping ad"),"AdStopped"in this.eventCallbacks_&&this.eventCallbacks_.AdStopped()}resizeAd(t,e,i){this.log("resizeAd "+t+"x"+e+" "+i),this.attributes_.width=t,this.attributes_.height=e,this.attributes_.viewMode=i,"AdSizeChange"in this.eventCallbacks_&&this.eventCallbacks_.AdSizeChange(),null!=this._adContainer&&t>0&&e>0&&(this._adContainer.style.width=t+"px",this._adContainer.style.height=e+"px",this._adContainer.querySelectorAll("iframe, video").forEach((function(i,n){i.style.width=t+"px",i.style.height=e+"px"})),this.iniPlayer.resize(t,e,i))}resumeAd(){this.log("resumeAd"),"AdResumed"in this.eventCallbacks_&&this.eventCallbacks_.AdResumed(),this.iniPlayer.play()}skipAd(){this.log("skipAd"),this.attributes_.skippableState&&("AdSkipped"in this.eventCallbacks_?this.eventCallbacks_.AdSkipped():this.log("Error: Invalid ad skip request."))}startAd(){this.log("startAd")}setAdVolume(){this.log("setAdVolume"),this.attributes_.volume=a,this.log("setAdVolume "+a),"AdVolumeChanged"in this.eventCallbacks_&&this.eventCallbacks_.AdVolumeChanged()}subscribe(t,e,i){this.log("subscribe");var n=t.bind(i);this.eventCallbacks_[e]=n}unsubscribe(){this.log("unsubscribe-dev")}renderSlot_(t){this.log("renderSlot_");var e=this.slot_&&"DIV"===this.slot_.tagName&&""==this.slot_.innerHTML,i=this.slot_.getElementsByTagName("iframe"),n="";null!=i[0]&&(i[0].style.width="100%",i[0].style.height="100%"),"0"===this.attributes_.click&&(n="#ad-container{pointer-events:none;}"),e||(this.slot_=document.createElement("div"),document.body||(document.body=document.createElement("body")),document.body.appendChild(this.slot_)),this.slot_.innerHTML=`\n        <style>\n            body{margin:0;padding:0;} \n            // #ad-container div:nth-child(2){z-index:3}\n            // #ad-container div:first-child{z-index:3}\n            #ad-container div:last-child iframe {z-index: 4}\n            #ini-ad-skip-btn{\n                position: relative;\n                z-index: 1000;\n            }\n            ${n}\n            .ini-videoAdUiAction {\n                -webkit-tap-highlight-color: rgba(0,0,0,0);\n                background: rgba(100,100,100,.8);\n                border: none;\n                box-sizing: content-box;\n                color: #fff;\n                cursor: pointer;\n                direction: ltr;\n                font-family: arial,sans-serif;\n                font-weight: normal;\n                font-size: 18px;\n                line-height: normal;\n                min-width: 150px;\n                padding: 10px 7px;\n                text-align: center;\n            }\n            .ini-videoAdUiSkipContainer {\n                -webkit-tap-highlight-color: rgba(0,0,0,0);\n                bottom: 22px;\n                cursor: pointer;\n                padding: 15px 0 15px 15px;\n                pointer-events: auto;\n                position: absolute;\n                right: 0;\n                z-index: 1000;\n                display: none;\n            }\n            .ini-videoAdUiSkipButton {\n                line-height: normal;\n                min-width: 0;\n                padding: 7px 6px 7px 10px;\n                width: auto;\n                margin: 0;\n                display: flex;\n                align-items: center;\n            }\n            .ini-videoAdUiSkipIcon {\n                display: inline-block;\n                height: 24px;\n                margin-left: 2px;\n                vertical-align: middle;\n                width: 24px;\n            }\n            .ini-videoAdUiSkipIcon>svg {\n                fill: white;\n                height: 24px;\n                width: 24px;\n                -webkit-filter: drop-shadow(0 1px 5px rgba(0,0,0,.2));\n                filter: drop-shadow(0 1px 5px rgba(0,0,0,.2));\n            }\n            #ini-vpaid-time-remain{\n                position: absolute;\n                bottom: 0;\n                background: rgba(100,100,100,.8);\n                color: #fff;\n                padding-left: 4px;\n                opacity: 0.3;\n                display: none;\n            }\n            \n            \n        </style>\n        <div data-test="123123" id="video-player" style="width:100%;height:100%;position:absolute;top:0;left:0;">\n            <video style="width:100%;height:100%;" id="vid-content" muted  playsinline><source src="" type="video/mp4" playsinline></source> </video>\n        </div>\n        <div id="ad-container"style="top:0;left:0;position: absolute;background:transparent;width:100%;height:100%;margin-left:auto;margin-right:auto;">\n            <div class="ini-videoAdUiSkipContainer" style="opacity: 0.8; display: none;">\n                <button class="ini-videoAdUiSkipButton ini-videoAdUiAction" style="outline: none;">\n                    <div>Skip Ad</div>\n                    <div class="ini-videoAdUiSkipIcon">\n                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">\n                            <path d="M16 18h2V6h-2M6 18l8.5-6L6 6v12z"></path>\n                        </svg>\n                    </div>\n                </button>\n            </div>\n            <div id="ini-vpaid-time-remain">\n            </div>\n        </div>\n        `,setTimeout((function(){t()}),500)}addButtonListeners_(){}fillProperties_(){}renderVideo(){try{if(this._vidContent=document.getElementById("vid-content")||window.parent.document.getElementById("vid-content"),this._adContainer=document.getElementById("ad-container")||window.parent.document.getElementById("ad-container"),this._videoPlayer=document.getElementById("video-player")||window.parent.document.getElementById("video-player"),Array.isArray(this.attributes_.vastURL)){var t=[];this.attributes_.vastURL.map((e=>{t.push({vast:decodeURIComponent(this.processVast(e.vast)),type:e.type})})),this.attributes_.vastURL=this.vastToVmap(t);var i={vmap:this.attributes_.vastURL,type:"vmap",vidContent:this._vidContent,adContainer:this._adContainer,videoPlayer:this._videoPlayer,playerSlot:this.slot_,customerClick:null,vpaidMode:this.attributes_.vpaid_mode?this.attributes_.vpaid_mode:"INSECURE",allowLog:d,blockClick:!!this.attributes_.click&&"0"===this.attributes_.click,timeShowSkipAd:this.timeShowSkipAd}}this.iniPlayer=new class{constructor(t){this.config=t,this.data={videoPlayer:this.config.vidContent,_adContainer:this.config.adContainer,playerSlot:this.config.playerSlot,adsManager:"",adDisplayContainer:"",adsLoader:"",intervalTimer:"",div_adContainer:"",lading_page:null,sendGA:!1},this.myEvent=document.createElement("ini_event_"+r),this.onAdsManagerLoaded=this.onAdsManagerLoaded.bind(this),this.onAdEvent=this.onAdEvent.bind(this),this.onAdError=this.onAdError.bind(this),this.onContentResumeRequested=this.onContentResumeRequested.bind(this)}init(){this.config.allowLog&&console.log(this),this.requestAds()}requestAds(){switch(this.log("requestAds"),this.log("vpaidMode",this.config.vpaidMode),this.config.vpaidMode){case"INSECURE":google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE);break;case"ENABLED":google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);break;case"DISABLED":google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED)}switch(this.createAdDisplayContainer(),this.data.adDisplayContainer.initialize(),this.data.videoPlayer.load(),this.data.adsLoader=new google.ima.AdsLoader(this.data.adDisplayContainer),this.config.vpaidMode){case"INSECURE":this.data.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE);break;case"ENABLED":this.data.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);break;case"DISABLED":this.data.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED)}this.data.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1),this.data.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1);var t=new google.ima.AdsRequest;t.vastLoadTimeout=3e4,t.setAdWillPlayMuted(!1),t.setAdWillAutoPlay(!0),"vast"==this.config.type?(t.adsResponse=null,t.adTagUrl=this.config.vastURL):"vmap"==this.config.type&&(t.adTagUrl=null,t.adsResponse=this.config.vmap),t.linearAdSlotWidth=this.config.adContainer.clientWidth,t.linearAdSlotHeight=this.config.adContainer.clientHeight,t.nonLinearAdSlotWidth=this.config.adContainer.clientWidth,t.nonLinearAdSlotHeight=this.config.adContainer.clientHeight,this.data.adsLoader.requestAds(t)}createAdDisplayContainer(){this.log("createAdDisplayContainer"),this.data.adDisplayContainer=new google.ima.AdDisplayContainer(this.config.adContainer,this.data.videoPlayer)}onAdsManagerLoaded(t){this.log("onAdsManagerLoaded"),(new google.ima.AdsRenderingSettings).restoreCustomPlaybackStateOnAdBreakComplete=!0,this.data.adsManager=t.getAdsManager(this.data.videoPlayer,r),this.data.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdEvent),this.data.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdEvent);try{this.data.adsManager.init(this.config.adContainer.clientWidth,this.config.adContainer.clientHeight,google.ima.ViewMode.NORMAL),this.data.adsManager.setVolume(0),this.data.adsManager.start()}catch(t){this.data.videoPlayer.play();var e=new CustomEvent("ini_AdEvent",{detail:"ERROR"});this.myEvent.dispatchEvent(e)}}onAdError(t){var e=t.getError();if(1009==e.getErrorCode()||901==e.getErrorCode()){var i=new CustomEvent("ini_AdEvent",{detail:"VASTEMPTY"});this.myEvent.dispatchEvent(i)}else 303==e.getErrorCode()?(i=new CustomEvent("ini_AdEvent",{detail:"TIMEOUT"}),this.myEvent.dispatchEvent(i)):(e.getErrorCode(),i=new CustomEvent("ini_AdEvent",{detail:"VASTEMPTY"}),this.myEvent.dispatchEvent(i))}onContentPauseRequested(){}onContentResumeRequested(){}onAdEvent(t){var i=t.getAd();switch(this.config.allowLog&&console.log("onAdEvent",t.type),this.config.allowLog&&console.log(t),t.j&&t.j.j&&t.j.j.adId,t.j&&t.j.j&&t.j.j.adSystem,e.location.host,t.j&&t.j.j&&t.j.j.clickThroughUrl,Math.floor(100*Math.random()),Math.floor(100*Math.random()),t.type){case google.ima.AdEvent.Type.PAUSED:break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:i.isLinear()&&clearInterval(this.data.intervalTimer),this.log("COMPLETE");var n=new CustomEvent("ini_AdEvent",{detail:"VASTEMPTY"});this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.LOADED:i.isLinear()||this.data.videoPlayer.play();break;case google.ima.AdEvent.Type.IMPRESSION:this.log("Ima event impresion"),(()=>{var e,n;for(e in t.getAd(),i)if(null!=(n=i[e].clickThroughUrl))break;""!=n&&(this.data.lading_page=n)})(),n=new CustomEvent("ini_AdEvent",{detail:"IMPRESSION"}),this.myEvent.dispatchEvent(n),setTimeout((()=>{try{const e=this.data.playerSlot.querySelectorAll('[title="Advertisement"]');let i=null;for(var t=0;t<e.length;t++)e.item(t).src&&(i=e[t]);if(!i){const e=this.data.playerSlot.querySelectorAll(["lima-video"]);for(t=0;t<e.length;t++)e.item(t).src&&(i=e[t])}i.addEventListener("timeupdate",(()=>{let t=this.formatTime(Math.round(i.currentTime)),e=this.formatTime(Math.round(i.duration));this.config.timeShowSkipAd===Math.round(i.currentTime)&&(this.data.playerSlot.querySelector(".ini-videoAdUiSkipContainer").addEventListener("click",(t=>{this.data.adsManager.stop()})),this.data.playerSlot.querySelector(".ini-videoAdUiSkipContainer").style.display="block"),this.data.playerSlot.querySelector("#ini-vpaid-time-remain").style.zIndex=3,this.data.playerSlot.querySelector("#ini-vpaid-time-remain").innerHTML=`${t.minutes}:${t.seconds}/${e.minutes}:${e.seconds}`}))}catch(t){this.config.allowLog&&console.log(t)}}),200);break;case google.ima.AdEvent.Type.STARTED:i.isLinear()&&(this.data.intervalTimer=setInterval((()=>{this.data.adsManager.getRemainingTime()}),300)),n=new CustomEvent("ini_AdEvent",{detail:"START"}),this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.log("FIRST_QUARTILE"),n=new CustomEvent("ini_AdEvent",{detail:"FIRSTQUARTILE"}),this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.MIDPOINT:this.log("MIDPOINT"),n=new CustomEvent("ini_AdEvent",{detail:"MIDPOINT"}),this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.log("THIRD_QUARTILE"),n=new CustomEvent("ini_AdEvent",{detail:"THIRDQUARTILE"}),this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.CLICK:this.log("CLICK"),n=new CustomEvent("ini_AdEvent",{detail:"CLICKTRACKING"}),this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.COMPLETE:i.isLinear()&&clearInterval(this.data.intervalTimer),this.log("COMPLETE"),n=new CustomEvent("ini_AdEvent",{detail:"COMPLETE"}),this.myEvent.dispatchEvent(n);break;case google.ima.AdEvent.Type.SKIPPED:this.log("Ima event impresion"),n=new CustomEvent("ini_AdEvent",{detail:"SKIPPED"}),this.myEvent.dispatchEvent(n),this.log("SKIPPED")}}play(){""!=this.data.adsManager&&this.data.adsManager.resume()}pause(){""!=this.data.adsManager&&this.data.adsManager.pause()}changeAdTag(t,e){this.config.adContainer.innerHTML="",this.config.type=e,"vast"==e?this.config.vastURL=t:"vmap"==e&&(this.config.vmap=t),""!=this.data.adsManager&&this.data.adsManager.updateAdsRenderingSettings()}setVolume(t){this.data.adsManager.setVolume(t)}getLandingPage(){return this.data.lading_page}resize(t,e,i){this.config.allowLog&&console.log("resize",{width:t,height:e}),this.data.adsManager?this.data.adsManager.resize(t,e,i):this.log("resize: cannot find adsManager")}log(t){this.config.allowLog&&console.log("VPAID Log V3: "+t)}formatTime(t){if(!t)return{minutes:0,seconds:0};const e=new Date(1e3*t).toISOString().substring(11,19);return{minutes:e.substring(3,5),seconds:e.substring(6,8)}}xhttp=(t,e,i="GET")=>{t.includes("?")||(t+="?");for(const i in e)t+=`&${i}=${encodeURIComponent(e[i])}`;const n=new XMLHttpRequest;n.open(i,t),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send()};setCookie(t,e,i){const n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);let a="expires="+n.toUTCString();s.cookie=t+"="+e+";"+a+";path=/"}getCookie(t){let e=t+"=",i=decodeURIComponent(s.cookie).split(";");for(let t=0;t<i.length;t++){let n=i[t];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""}}(i),this.iniPlayer.init(),this.iniPlayer.myEvent.addEventListener("ini_AdEvent",this.ini_AdEvent),this.iniPlayer.play()}catch(t){this.log(t)}}processVast(t){if(this.log("processVast"),t.indexOf("doubleclick.net")>-1){var e=this.parseQuery(t),i=t.replace(t.slice(t.indexOf("?")+1),""),n=new Date,a=parseInt(999998*Math.random()+1);if(e.correlator=n.getTime()+a,null!=this.attributes_.description_url?e.description_url=this.attributes_.description_url||"":e.description_url=window.location.href||"",(void 0===e.description_url||""==e.description_url)&&(o=window.location.ancestorOrigins).length>0&&(e.url=o[o.length-1],e.description_url=o[o.length-1]),void 0===e.sz||""==e.sz){var s=this.getAdWidth(),r=this.getAdHeight();e.sz=s+"x"+r}t=i+this.buildQuery(e)}else if(t.indexOf("vast.aniview.com")>-1){var o;e=this.parseQuery(t),i=t.replace(t.slice(t.indexOf("?")+1),""),null!=this.attributes_.description_url?e.AV_URL=this.attributes_.description_url||"":e.AV_URL=window.location.href||"",""==e.AV_URL&&(o=window.location.ancestorOrigins).length>0&&(e.AV_URL=o[o.length-1]),n=new Date,a=parseInt(999998*Math.random()+1),e.cb=n.getTime()+a,e.AV_WIDTH=this.getAdWidth(),e.AV_HEIGHT=this.getAdHeight(),t=i+this.buildQuery(e)}return t.replace("[TIMESTAMP]",encodeURIComponent(Date.now()+Math.floor(100*Math.random())))}vastToVmap(t){let e=[];return t.forEach(((t,i)=>{var n=0,a=0;i<60||(n=i/60),(a=i%60)<10&&(a="0"+a),n<10&&(n="0"+n),e.push(`\n                <vmap:AdBreak timeOffset="start" breakType="linear" breakId="preroll-${i}">\n                        <vmap:AdSource id="preroll-ad-${i}" allowMultipleAds="true" followRedirects="true">\n                            <vmap:VASTAdData>\n                                <VAST version="3.0">\n                                    <Ad id="ad-${i}" sequence="1" conditionalAd="false">\n                                        <Wrapper followAdditonalWrappers="true" allowMultipleAds="true" fallbackOnNoAd="true">\n                                            <AdSystem>Media</AdSystem>\n                                            <VASTAdTagURI>\n                                                <![CDATA[${t.vast}]]>\n                                            </VASTAdTagURI>\n                                        </Wrapper>\n                                    </Ad>\n                                </VAST>\n                            </vmap:VASTAdData>\n                        </vmap:AdSource>\n                    </vmap:AdBreak>\n                `)})),0===e.length?"":(e=['<?xml version="1.0" encoding="UTF-8"?>\n                    <vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">',...e,"</vmap:VMAP>"],e.join(""))}getWeekOfMonth(){var t=new Date,e=t.getDate(),i=t.getDay();return Math.ceil((e-1-i)/7)+1}logPercentVisible_(){try{var t=this.slot_,e=t.getBoundingClientRect(),i=Math.min(e.left+t.offsetWidth,window.parent.pageXOffset+window.parent.innerWidth),n=Math.max(e.left,window.parent.pageXOffset),a=window.parent.innerWidth||window.parent.document.documentElement.clientWidth||window.parent.document.body.clientWidth,s=window.parent.innerHeight||window.parent.document.documentElement.clientHeight||window.parent.document.body.clientHeight,r=e.top<0?0:Math.min(e.top,a),o=(e.bottom<0?0:Math.min(e.bottom,s))-r,d=i-n;if(o>0&&d>0){var l=t.offsetWidth*t.offsetHeight;0!=l&&Math.round(d*o*100/l)}}catch(t){return!1}return!0}parseQuery(t){return t.slice(t.indexOf("?")+1).split("&").reduce(((t,e)=>{let[i,n]=e.split("=");return t[i]=n,t}),{})}buildQuery(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}ini_AdEvent(t){switch(t.detail){case"IMPRESSION":this.log("impresion"),this.Impression();break;case"CLICKTRACKING":this.log("CLICKTRACKING"),this.EventClick();break;case"ERROR":this.log("ERROR");break;case"START":this.log("START"),this.START();break;case"CREATIVEVIEW":this.log("CREATIVEVIEW");break;case"FIRSTQUARTILE":this.log("FIRSTQUARTILE"),this.FIRST_QUARTILE();break;case"MIDPOINT":this.log("MIDPOINT"),this.MID_QUARTILE();break;case"THIRDQUARTILE":this.log("THIRDQUARTILE"),this.THIRD_QUARTILE();break;case"COMPLETE":this.log("COMPLETE"),this.CompleteAds();break;case"SKIPPED":this.log("SKIPPED"),this.SkipAd();break;case"VASTEMPTY":this.log("VASTEMPTY"),this.log("end waterfall"),setTimeout((()=>{"AdStopped"in this.eventCallbacks_&&this.eventCallbacks_.AdStopped(),this.iniPlayer.play()}),500);break;case"TIMEOUT":this.log("Vast TIMEOUT")}}Impression(t){"AdImpression"in this.eventCallbacks_&&this.eventCallbacks_.AdImpression(),"AdStarted"in this.eventCallbacks_&&this.eventCallbacks_.AdStarted()}SkipAd(){this.log("skipAd"),"AdStopped"in this.eventCallbacks_&&this.eventCallbacks_.AdStopped()}START(){this.log("STARTED"),"AdVideoStart"in this.eventCallbacks_&&this.eventCallbacks_.AdVideoStart()}FIRST_QUARTILE(t){this.log("FIRST_QUARTILE"),"AdVideoFirstQuartile"in this.eventCallbacks_&&this.eventCallbacks_.AdVideoFirstQuartile()}MID_QUARTILE(t){this.log("MID_QUARTILE"),"AdVideoMidpoint"in this.eventCallbacks_&&this.eventCallbacks_.AdVideoMidpoint()}THIRD_QUARTILE(t){this.log("THIRD_QUARTILE"),"AdVideoThirdQuartile"in this.eventCallbacks_&&this.eventCallbacks_.AdVideoThirdQuartile()}CompleteAds(t){this.log("AdComplete"),"AdVideoComplete"in this.eventCallbacks_&&this.eventCallbacks_.AdVideoComplete()}reRenderVideo(){try{this._vidContent=document.getElementById("vid-content")||window.parent.document.getElementById("vid-content"),this._adContainer=document.getElementById("ad-container")||window.parent.document.getElementById("ad-container"),this._videoPlayer=document.getElementById("video-player")||window.parent.document.getElementById("video-player");var t="vast";if(Array.isArray(this.attributes_.vastURL)){for(var e=[],i=0;i<this.attributes_.vastURL.length;i++)e.push(decodeURIComponent(this.processVast(this.attributes_.vastURL[i])));this.attributes_.vastURL=this.vastToVmap(e),t="vmap"}this.iniPlayer.changeAdTag(this.attributes_.vastURL,t),this.iniPlayer.requestAds(),this.iniPlayer.play()}catch(t){this.log("ERROR VPAIDDD: ",t)}}AdDurationChange(t){t.eventCallbacks_.AdDurationChange()}Click(t){this.log("AdClickThru"),this.eventCallbacks_.AdClickThru}EventClick(t){this.eventCallbacks_.AdClickThru(this.attributes_.LandingPage,"1","true")}addEvent(t,e,i){var n=window.navigator.userAgent.indexOf("MSIE");(addEvent=t.addEventListener&&1>n?function(t,e,i){t.addEventListener(e,i,!1)}:t.attachEvent?function(t,e,i){t.attachEvent("on"+e,i)}:function(t,e,i){t[e]=i})(t,e,i)}getAdCompanions(){return this.attributes_.companions}adClickThruHandler_(){if(this.isEventSubscribed_("AdClickThru")){var t=this.getElement_("clickThruUrl").value,e=this.getElement_("clickThruId").value,i=this.getElement_("clickThruPlayerHandels").value;this.log("AdClickThu("+t+","+e+","+i+")"),this.eventCallbacks_.AdClickThru(t,e,i)}else this.log("Error: AdClickThru function callback not subscribed.")}adErrorHandler_(){if(this.isEventSubscribed_("AdError")){var t=this.getElement_("adErrorMsg").value;this.log("adError("+t+")"),this.eventCallbacks_.AdError(t)}else this.log("AdError function callback not subscribed.")}adLogHandler_(){if(this.isEventSubscribed_("AdLog")){var t=this.getElement_("adLogMsg").value;this.log("adLog("+t+")"),this.eventCallbacks_.AdLog(t)}else this.log("Error: AdLog function callback not subscribed.")}adInteractionHandler_(){if(this.isEventSubscribed_("AdInteraction")){var t=this.getElement_("adInteractionId").value;this.log("adLog("+t+")"),this.eventCallbacks_.AdInteraction(t)}else this.log("Error: AdInteraction function callback not subscribed.")}eventSelected_(){var t=this.getElement_("AdClickThruOptions"),e=this.getElement_("AdErrorOptions"),i=this.getElement_("AdLogOptions"),n=this.getElement_("AdInteractionOptions");t.style.display="none",e.style.display="none",i.style.display="none",n.style.display="none";var a=this.getElement_("eventSelect").value;"AdClickThru"==a?t.style.display="inline":"AdError"==a?e.style.display="inline":"AdLog"==a?i.style.display="inline":"AdInteraction"==a&&(n.style.display="inline")}isEventSubscribed_(t){return"function"==typeof this.eventCallbacks_[t]}getElement_(t){if(null!=(e=document.getElementById(t)))return e;try{var e=parent.document.getElementById(t)}catch(t){this.log("ERROR getElement_: ",t)}return e}}const h=function(){return l=new l,console.log("vpaid ad constructor"),l}})(),window.getVPAIDAd=n.default})();